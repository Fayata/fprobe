{{define "title"}}Scheduler{{end}}

{{define "head"}}
<!-- Tidak ada <head> tambahan untuk halaman ini -->
{{end}}

{{define "content"}}

<!-- KARTU PENGATURAN SCHEDULER -->
<div class="card">
    <h2 class="card-title">
        <svg class="icon" fill="currentColor" viewBox="0 0 24 24">
            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
        </svg>
        Pengaturan Scheduler
    </h2>
    <form action="/settings" method="POST" class="input-group">
        <select name="interval">
            <option value="@every 1m" {{if eq .CurrentInterval "@every 1m"}}selected{{end}}>Setiap 1 Menit (Testing)</option>
            <option value="@every 5m" {{if eq .CurrentInterval "@every 5m"}}selected{{end}}>Setiap 5 Menit</option>
            <option value="@every 10m" {{if eq .CurrentInterval "@every 10m"}}selected{{end}}>Setiap 10 Menit</option>
            <option value="@every 30m" {{if eq .CurrentInterval "@every 30m"}}selected{{end}}>Setiap 30 Menit</option>
        </select>
        <button type="submit" class="btn">
            <svg class="icon" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
            </svg>
            Simpan Jadwal
        </button>
    </form>
</div>


<!-- KARTU RIWAYAT PROBE TERBARU (YANG HILANG) -->
<div class="card">
    <h2 class="card-title">
        <svg class="icon" fill="currentColor" viewBox="0 0 24 24">
            <path d="M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.98-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>
        </svg>
        Riwayat Probe Terbaru (50 Terakhir)
    </h2>
    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>
                        <svg class="icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                        </svg>
                        <span>Waktu</span>
                    </th>
                    <th>
                        <svg class="icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
                        </svg>
                        <span>URL</span>
                    </th>
                    <th>
                        <svg class="icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.38 8.57l-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83z"/>
                        </svg>
                        <span>Latency (Last)</span>
                    </th>
                </tr>
            </thead>
            <tbody>
                {{range .HistoryData}}
                <tr>
                    <td class="date-time">{{.Timestamp.Format "2 Jan 15:04:05"}}</td>
                    <td>
                        <!-- Kita cari URL berdasarkan ID -->
                        {{$urlID := .URLID}}
                        {{range $.URLs}}
                            {{if eq .ID $urlID}}
                                <a href="{{.URL}}" class="url-link" target="_blank">{{.URL}}</a>
                            {{end}}
                        {{end}}
                    </td>
                    <td class="latency">{{.LatencyMs}} ms</td>
                </tr>
                {{else}}
                <tr>
                    <td colspan="3" style="text-align: center; color: #a0a0a0; padding: 20px;">
                        Belum ada riwayat probe.
                    </td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </div>
</div>
{{end}}

